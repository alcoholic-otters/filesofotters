<h1>Files of otters</h1>

{% if messages %}
<ul>
  {% for message in messages %}
  <li>{{ message }}</li>
  {% endfor %}
</ul>
{% endif %}

<form method="post" action="{% url 'filesharing:upload' %}" enctype="multipart/form-data" required>
  {% csrf_token %}
  <label for="the_file">Choose a file to upload:</label>
  <input type="file" name="the_file">
  <input type="submit" value="Upload">
</form>

<h2>Available files</h2>
<ul>
  {% for file in files %}
  <li>
    <p>{{ file.name }}</p>
    <p>{{ file.human_size }}</p>
    <p><a href="{{ file.download_url }}" download>download</a></p>

    <!--
    We use a form to send the delete command. Because HTML forms don't support
    the DELETE method, the backend expects us to use a trick.
    -->
    <p>
      <form method="post" action="{% url 'filesharing:delete' file.id %}">
        {% csrf_token %}
        <input type="hidden" name="_method" value="delete">
        <input type="submit" value="DELETE">
      </form>
    </p>
  </li>
  <hr>
  {% endfor %}
</ul>
